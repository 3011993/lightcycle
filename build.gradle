buildscript {
  repositories {
    mavenLocal()
    mavenCentral()
    jcenter()
  }
  dependencies {
    classpath 'com.android.tools.build:gradle:1.2.3'
    classpath 'com.netflix.nebula:gradle-extra-configurations-plugin:2.2.0'
  }
}

task wrapper(type: Wrapper) {
  description 'Creates the gradle wrapper.'
  gradleVersion '2.4'
}

allprojects {
  repositories {
    mavenLocal()
    mavenCentral()
  }
}

// configure Java projects
[":lightcycle-api", ":lightcycle-processor"].each { name ->
  project(name) {

    apply plugin: 'provided-base'
    apply plugin: 'java'
    apply plugin: 'maven'

    group = GROUP
    version = VERSION_NAME
// TODO name = POM_ARTIFACT_ID

    sourceCompatibility = JavaVersion.VERSION_1_7
    targetCompatibility = JavaVersion.VERSION_1_7

    task sourcesJar(type: Jar, dependsOn: classes) {
      classifier = 'sources'
      from sourceSets.main.allSource
    }

    task testJar(type: Jar) {
      classifier = 'tests'
      from sourceSets.test.output
      include '**/test/**/*.class'
    }

    artifacts {
      archives jar
      archives sourcesJar
      archives testJar
    }

    uploadArchives {
      repositories {
        mavenDeployer {
          repository(url: RELEASE_REPOSITORY_URL)
          snapshotRepository(url: SNAPSHOT_REPOSITORY_URL)
        }
      }
    }
  }
}
